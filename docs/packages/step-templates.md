# –°–∏—Å—Ç–µ–º–∞ —à–∞–±–ª–æ–Ω–æ–≤ —à–∞–≥–æ–≤ (@gafus/step-templates)

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ —à–∞–±–ª–æ–Ω–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ç—Ä–µ–Ω–µ—Ä–∞–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥–∏–∫–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —à–∞–≥–æ–≤. –®–∞–±–ª–æ–Ω—ã –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º —Ç—Ä–µ–Ω–µ—Ä–∞–º –≤ —Å–∏—Å—Ç–µ–º–µ.

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –î–ª—è —Ç—Ä–µ–Ω–µ—Ä–æ–≤

- **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤** - –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ –ø–æ–∏—Å–∫ –≥–æ—Ç–æ–≤—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤
- **–ë—ã—Å—Ç—Ä–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ** - –°–æ–∑–¥–∞–Ω–∏–µ —à–∞–≥–∞ –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º –∏–∑ —à–∞–±–ª–æ–Ω–∞
- **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏** - –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–æ–≤ –ø–æ —Ç–µ–º–∞–º
- **–ü–æ–∏—Å–∫** - –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, –æ–ø–∏—Å–∞–Ω–∏—é –∏ —Ç–µ–≥–∞–º
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏ —à–∞–±–ª–æ–Ω–æ–≤

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

- **–°–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤** - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏** - –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤
- **–£–¥–∞–ª–µ–Ω–∏–µ** - –£–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### StepCategory

–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —à–∞–±–ª–æ–Ω–æ–≤:

```prisma
model StepCategory {
  id          String         @id @default(cuid())
  name        String         @unique
  description String?
  icon        String?        // Emoji –∏–ª–∏ –ø—É—Ç—å –∫ –∏–∫–æ–Ω–∫–µ
  order       Int            @default(0)
  templates   StepTemplate[]
  createdAt   DateTime       @default(now())
  updatedAt   DateTime       @updatedAt
}
```

**–ü—Ä–∏–º–µ—Ä—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–π:**

- üéØ –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
- ü§ù –°–æ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- üèÜ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –¥—Ä–µ—Å—Å–∏—Ä–æ–≤–∫–∞
- üê∂ –î–ª—è —â–µ–Ω–∫–æ–≤

### StepTemplate

–®–∞–±–ª–æ–Ω—ã —à–∞–≥–æ–≤ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫:

```prisma
model StepTemplate {
  id                      String         @id @default(cuid())
  title                   String
  description             String
  durationSec             Int?
  type                    StepType       // TRAINING –∏–ª–∏ EXAMINATION
  imageUrls               String[]
  pdfUrls                 String[]
  videoUrl                String?
  checklist               Json?

  // –ü–æ–ª—è –¥–ª—è —ç–∫–∑–∞–º–µ–Ω–æ–≤
  requiresVideoReport     Boolean        @default(false)
  requiresWrittenFeedback Boolean        @default(false)
  hasTestQuestions        Boolean        @default(false)

  // –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è
  categoryId      String?
  category        StepCategory?
  tags            String[]       @default([])

  // –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞
  isPublic        Boolean        @default(true)

  // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  usageCount      Int            @default(0)

  authorId        String
  author          User

  createdAt       DateTime       @default(now())
  updatedAt       DateTime       @updatedAt
}
```

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ü—Ä–æ—Å–º–æ—Ç—Ä –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

```
–¢—Ä–µ–Ω–µ—Ä ‚Üí /main-panel/templates
```

–¢—Ä–µ–Ω–µ—Ä –≤–∏–¥–∏—Ç:

- –í—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- –ü–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
- –°—á–µ—Ç—á–∏–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π

### 2. –í—ã–±–æ—Ä —à–∞–±–ª–æ–Ω–∞

```typescript
// –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω"
const result = await createStepFromTemplate(templateId);

if (result.success) {
  // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —à–∞–≥–∞
  router.push(`/main-panel/steps/${result.stepId}/edit`);
}
```

### 3. –°–æ–∑–¥–∞–Ω–∏–µ —à–∞–≥–∞

```typescript
// Server action: createStepFromTemplate
1. –ü–æ–ª—É—á–∏—Ç—å —à–∞–±–ª–æ–Ω –∏–∑ –ë–î
2. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π Step —Å –¥–∞–Ω–Ω—ã–º–∏ —à–∞–±–ª–æ–Ω–∞
3. –£–≤–µ–ª–∏—á–∏—Ç—å usageCount —à–∞–±–ª–æ–Ω–∞
4. –í–µ—Ä–Ω—É—Ç—å ID –Ω–æ–≤–æ–≥–æ —à–∞–≥–∞
```

## üìä API –∏ Server Actions

### –ü–æ–ª—É—á–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤

```typescript
import { getStepTemplates } from "@features/steps/lib/getStepTemplates";

// –í—Å–µ —à–∞–±–ª–æ–Ω—ã
const templates = await getStepTemplates();

// –ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
const templates = await getStepTemplates(categoryId);

// –ü–æ–∏—Å–∫
import { searchStepTemplates } from "@features/steps/lib/getStepTemplates";
const results = await searchStepTemplates("–±–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã");
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

```typescript
import { getStepCategories } from "@features/steps/lib/getStepCategories";

const categories = await getStepCategories();
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —à–∞–±–ª–æ–Ω–æ–≤
```

### –°–æ–∑–¥–∞–Ω–∏–µ —à–∞–≥–∞ –∏–∑ —à–∞–±–ª–æ–Ω–∞

```typescript
import { createStepFromTemplate } from "@features/steps/lib/createStepFromTemplate";

const result = await createStepFromTemplate(templateId);
// { success: true, message: "...", stepId: "..." }
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞–º–∏ (–ê–¥–º–∏–Ω)

```typescript
import {
  createStepTemplate,
  deleteStepTemplate,
  createStepCategory,
} from "@features/steps/lib/manageTemplates";

// –°–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
const result = await createStepTemplate(prevState, formData);

// –£–¥–∞–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
const result = await deleteStepTemplate(templateId);

// –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
const result = await createStepCategory(prevState, formData);
```

## üé® UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### TemplateLibrary

–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:

```tsx
import TemplateLibrary from "@features/steps/components/TemplateLibrary";

<TemplateLibrary
  initialTemplates={templates}
  categories={categories}
  onUseTemplate={createStepFromTemplate}
/>;
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**

- –ö–∞—Ä—Ç–æ—á–∫–∏ —à–∞–±–ª–æ–Ω–æ–≤ —Å –ø—Ä–µ–≤—å—é
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–≥–æ–≤
- –°—á–µ—Ç—á–∏–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π

### AdminTemplateManager

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤:

```tsx
import AdminTemplateManager from "@features/steps/components/AdminTemplateManager";

<AdminTemplateManager
  templates={templates}
  categories={categories}
  onDeleteTemplate={deleteStepTemplate}
/>;
```

## üöÄ –°—Ç—Ä–∞–Ω–∏—Ü—ã

### `/main-panel/templates`

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤ –¥–ª—è –≤—Å–µ—Ö —Ç—Ä–µ–Ω–µ—Ä–æ–≤

- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫
- –°–æ–∑–¥–∞–Ω–∏–µ —à–∞–≥–∞ –∏–∑ —à–∞–±–ª–æ–Ω–∞

### `/main-panel/steps/new`

–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —à–∞–≥–∞

- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è —à–∞–≥–∞
- –°—Å—ã–ª–∫–∞ –Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫—É —à–∞–±–ª–æ–Ω–æ–≤
- –ü–æ–¥—Å–∫–∞–∑–∫–∞ –æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —à–∞–±–ª–æ–Ω–æ–≤

### `/main-panel/admin/templates`

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞–º–∏ (—Ç–æ–ª—å–∫–æ ADMIN)

- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —à–∞–±–ª–æ–Ω–æ–≤
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏

### `/main-panel/admin/templates/new`

–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ (—Ç–æ–ª—å–∫–æ ADMIN)

- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–∞
- –í—Å–µ –ø–æ–ª—è Step + –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–æ–≤

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ —á–µ—Ä–µ–∑ seed

```typescript
await prisma.stepTemplate.create({
  data: {
    title: "–ö–æ–º–∞–Ω–¥–∞ '–°–∏–¥–µ—Ç—å'",
    description: "## –û–±—É—á–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–µ...",
    durationSec: 300,
    type: "TRAINING",
    categoryId: basicCommandsCategory.id,
    tags: ["–±–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã", "–ø–æ—Å–ª—É—à–∞–Ω–∏–µ"],
    authorId: admin.id,
    isPublic: true,
  },
});
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

```typescript
// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ —Ç—Ä–µ–Ω–µ—Ä–∞
const handleUseTemplate = async (templateId: string) => {
  const result = await createStepFromTemplate(templateId);

  if (result.success && result.stepId) {
    // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
    router.push(`/main-panel/steps/${result.stepId}/edit`);
  }
};
```

## üîê –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### –¢—Ä–µ–Ω–µ—Ä—ã (TRAINER, MODERATOR)

- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—É–±–ª–∏—á–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —à–∞–≥–æ–≤ –∏–∑ —à–∞–±–ª–æ–Ω–æ–≤
- ‚úÖ –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- ‚ùå –°–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã (ADMIN)

- ‚úÖ –í—Å–µ –ø—Ä–∞–≤–∞ —Ç—Ä–µ–Ω–µ—Ä–æ–≤
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç:

- **usageCount** - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π —à–∞–±–ª–æ–Ω–∞
- –ü–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å —à–∞–±–ª–æ–Ω–æ–≤ (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ usageCount)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞–±–ª–æ–Ω–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

## üéØ Best Practices

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

1. **–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Markdown –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
   - –í–∫–ª—é—á–∞–π—Ç–µ –ø–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
   - –î–æ–±–∞–≤–ª—è–π—Ç–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ —Å–æ–≤–µ—Ç—ã

2. **–û—Ä–≥–∞–Ω–∏–∑—É–π—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–Ω—è—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è
   - –î–æ–±–∞–≤–ª—è–π—Ç–µ emoji-–∏–∫–æ–Ω–∫–∏
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ –ª–æ–≥–∏—á–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É

3. **–î–æ–±–∞–≤–ª—è–π—Ç–µ —Ç–µ–≥–∏**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã
   - –î–æ–±–∞–≤–ª—è–π—Ç–µ —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
   - –£–∫–∞–∑—ã–≤–∞–π—Ç–µ –≤–æ–∑—Ä–∞—Å—Ç –ø–∏—Ç–æ–º—Ü–∞

### –î–ª—è —Ç—Ä–µ–Ω–µ—Ä–æ–≤

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —à–∞–±–ª–æ–Ω—ã –∫–∞–∫ –æ—Å–Ω–æ–≤—É**
   - –ê–¥–∞–ø—Ç–∏—Ä—É–π—Ç–µ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å–æ–±–∞–∫—É
   - –î–æ–±–∞–≤–ª—è–π—Ç–µ —Å–≤–æ–∏ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è
   - –ò–∑–º–µ–Ω—è–π—Ç–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

2. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É**
   - –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã = –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥–∏–∫–∏
   - –û–±—Ä–∞—â–∞–π—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –æ—Ç–∑—ã–≤—ã

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —à–∞–±–ª–æ–Ω–æ–≤

```bash
# –ú–∏–≥—Ä–∞—Ü–∏—è —É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
prisma migrate dev --name add_step_templates
```

### Seed –¥–∞–Ω–Ω—ã—Ö

```bash
# –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–∑—ã –ø—Ä–∏–º–µ—Ä–∞–º–∏
cd packages/prisma
DATABASE_URL="..." npx tsx seed.ts
```

Seed —Å–æ–∑–¥–∞—Å—Ç:

- 4 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã, –°–æ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –¥—Ä–µ—Å—Å–∏—Ä–æ–≤–∫–∞, –î–ª—è —â–µ–Ω–∫–æ–≤)
- 10 —à–∞–±–ª–æ–Ω–æ–≤ —à–∞–≥–æ–≤ (–≤–∫–ª—é—á–∞—è —ç–∫–∑–∞–º–µ–Ω–∞—Ü–∏–æ–Ω–Ω—ã–π)

## üêõ Troubleshooting

### –®–∞–±–ª–æ–Ω—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. `isPublic = true` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
2. –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. –°—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

### –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —à–∞–≥–∞

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (TRAINER, ADMIN, MODERATOR)
3. –°—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
4. –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —à–∞–±–ª–æ–Ω–∞ (isPublic)

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
SELECT * FROM "StepCategory" ORDER BY "order";

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤
SELECT id, title, "categoryId", "isPublic", "usageCount"
FROM "StepTemplate"
ORDER BY "usageCount" DESC;
```

---

_–°–∏—Å—Ç–µ–º–∞ —à–∞–±–ª–æ–Ω–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Ç—Ä–µ–Ω–µ—Ä–æ–≤ –∏ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ —Å–∏—Å—Ç–µ–º–µ GAFUS._
