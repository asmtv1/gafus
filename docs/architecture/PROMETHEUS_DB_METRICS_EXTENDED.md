# –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

## –û–±–∑–æ—Ä

–î–æ–±–∞–≤–ª–µ–Ω—ã –¥–µ—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ PostgreSQL –∏ Redis, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥–∞—é—Ç –≤ –æ—Ç–ª–∞–¥–∫–µ –ø—Ä–æ–±–ª–µ–º –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã.

## PostgreSQL –º–µ—Ç—Ä–∏–∫–∏

### –ë–∞–∑–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- ‚úÖ **–°—Ç–∞—Ç—É—Å**: online/offline
- ‚úÖ **–í–µ—Ä—Å–∏—è**: –≤–µ—Ä—Å–∏—è PostgreSQL
- ‚úÖ **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è**: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
- ‚úÖ **–í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞**: –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ —á–µ—Ä–µ–∑ Prometheus API

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

#### 1. –†–∞–∑–º–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **–ú–µ—Ç—Ä–∏–∫–∞**: `pg_database_size_bytes`
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä –≤—Å–µ—Ö –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–π—Ç–∞—Ö
- **–ü–æ–ª—å–∑–∞**: –ü–æ–º–æ–≥–∞–µ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ, –≤—ã—è–≤–ª—è—Ç—å –±—ã—Å—Ç—Ä–æ—Ä–∞—Å—Ç—É—â–∏–µ –ë–î
- **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ**: –í GB –≤ UI

#### 2. Cache Hit Ratio
- **–ú–µ—Ç—Ä–∏–∫–∞**: `pg_stat_database_blks_hit` / (`pg_stat_database_blks_hit` + `pg_stat_database_blks_read`)
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü—Ä–æ—Ü–µ–Ω—Ç –ø–æ–ø–∞–¥–∞–Ω–∏–π –≤ –∫—ç—à PostgreSQL (0-100%)
- **–ü–æ–ª—å–∑–∞**: 
  - **> 95%** - –æ—Ç–ª–∏—á–Ω–æ, –∫—ç—à —Ä–∞–±–æ—Ç–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ
  - **< 95%** - –Ω—É–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å `shared_buffers` –∏–ª–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã
- **–ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**: –ù–∏–∑–∫–∏–π cache hit ratio = –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

#### 3. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- **–ú–µ—Ç—Ä–∏–∫–∏**: 
  - `pg_stat_database_xact_commit` - —É—Å–ø–µ—à–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
  - `pg_stat_database_xact_rollback` - –æ—Ç–∫–∞—Ç—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ —Å–µ–∫—É–Ω–¥—É
- **–ü–æ–ª—å–∑–∞**: 
  - –í—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç rollbacks = –ø—Ä–æ–±–ª–µ–º—ã –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
  - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –ë–î

#### 4. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
- **–ú–µ—Ç—Ä–∏–∫–∏**:
  - `pg_stat_database_tup_fetched` - SELECT –∑–∞–ø—Ä–æ—Å—ã
  - `pg_stat_database_tup_inserted` - INSERT –∑–∞–ø—Ä–æ—Å—ã
  - `pg_stat_database_tup_updated` - UPDATE –∑–∞–ø—Ä–æ—Å—ã
  - `pg_stat_database_tup_deleted` - DELETE –∑–∞–ø—Ä–æ—Å—ã
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –≤ —Å–µ–∫—É–Ω–¥—É
- **–ü–æ–ª—å–∑–∞**: –ü–æ–Ω–∏–º–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –Ω–∞–≥—Ä—É–∑–∫–∏, –≤—ã—è–≤–ª–µ–Ω–∏–µ –∞–Ω–æ–º–∞–ª–∏–π

#### 5. Deadlocks
- **–ú–µ—Ç—Ä–∏–∫–∞**: `pg_stat_database_deadlocks`
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ deadlocks –≤ —Å–µ–∫—É–Ω–¥—É
- **–ü–æ–ª—å–∑–∞**: 
  - **> 0** - –ø—Ä–æ–±–ª–µ–º–∞! –ù—É–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
  - –í—ã—è–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏

#### 6. –û–∂–∏–¥–∞—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã
- **–ú–µ—Ç—Ä–∏–∫–∞**: `pg_stat_activity{state="waiting"}`
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤, –æ–∂–∏–¥–∞—é—â–∏—Ö –±–ª–æ–∫–∏—Ä–æ–≤–∫—É
- **–ü–æ–ª—å–∑–∞**: –í—ã—è–≤–ª–µ–Ω–∏–µ —É–∑–∫–∏—Ö –º–µ—Å—Ç, –ø—Ä–æ–±–ª–µ–º —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é

## Redis –º–µ—Ç—Ä–∏–∫–∏

### –ë–∞–∑–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- ‚úÖ **–°—Ç–∞—Ç—É—Å**: online/offline
- ‚úÖ **–í–µ—Ä—Å–∏—è**: –≤–µ—Ä—Å–∏—è Redis
- ‚úÖ **–í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞**: –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ —á–µ—Ä–µ–∑ Prometheus API

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

#### 1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
- **–ú–µ—Ç—Ä–∏–∫–∏**:
  - `redis_memory_used_bytes` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –ø–∞–º—è—Ç–∏
  - `redis_memory_max_bytes` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –¢–µ–∫—É—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ Redis
- **–ü–æ–ª—å–∑–∞**: 
  - **> 90%** - –∫—Ä–∏—Ç–∏—á–Ω–æ! –ù—É–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å `maxmemory` –∏–ª–∏ –æ—á–∏—Å—Ç–∏—Ç—å –∫—ç—à
  - **> 75%** - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, —Å–∫–æ—Ä–æ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è –ø–∞–º—è—Ç—å
  - –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è**: –ü–∞–º—è—Ç—å Redis –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞!

#### 2. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–ª—é—á–µ–π
- **–ú–µ—Ç—Ä–∏–∫–∏**:
  - `redis_keyspace_keys` - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª—é—á–µ–π
  - `redis_keyspace_keys_expired` - –∏—Å—Ç–µ–∫—à–∏–µ –∫–ª—é—á–∏
  - `redis_evicted_keys_total` - —É–¥–∞–ª–µ–Ω–Ω—ã–µ –∫–ª—é—á–∏ –∏–∑-–∑–∞ –Ω–µ—Ö–≤–∞—Ç–∫–∏ –ø–∞–º—è—Ç–∏
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–ª—é—á–∞–º –≤ Redis
- **–ü–æ–ª—å–∑–∞**: 
  - **Evicted keys > 0** - –ø–∞–º—è—Ç—å –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∞, –∫–ª—é—á–∏ —É–¥–∞–ª—è—é—Ç—Å—è!
  - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–∑–º–µ—Ä–∞ –∫—ç—à–∞
  - –í—ã—è–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å TTL

#### 3. Cache Hit Ratio
- **–ú–µ—Ç—Ä–∏–∫–∏**:
  - `redis_keyspace_hits` - –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ –∫—ç—à
  - `redis_keyspace_misses` - –ø—Ä–æ–º–∞—Ö–∏ –∫—ç—à–∞
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü—Ä–æ—Ü–µ–Ω—Ç –ø–æ–ø–∞–¥–∞–Ω–∏–π –≤ –∫—ç—à Redis (0-100%)
- **–ü–æ–ª—å–∑–∞**: 
  - **> 80%** - –æ—Ç–ª–∏—á–Ω–æ, –∫—ç—à —Ä–∞–±–æ—Ç–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ
  - **< 80%** - –Ω—É–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**: –ù–∏–∑–∫–∏–π hit ratio = –±–æ–ª—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î

#### 4. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–º–∞–Ω–¥
- **–ú–µ—Ç—Ä–∏–∫–∞**: `redis_commands_processed_total`
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –≤ —Å–µ–∫—É–Ω–¥—É
- **–ü–æ–ª—å–∑–∞**: 
  - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ Redis
  - –í—ã—è–≤–ª–µ–Ω–∏–µ –ø–∏–∫–æ–≤ –Ω–∞–≥—Ä—É–∑–∫–∏
  - –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

#### 5. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
- **–ú–µ—Ç—Ä–∏–∫–∞**: `redis_connected_clients`
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ Redis
- **–ü–æ–ª—å–∑–∞**: 
  - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è connection pool
  - –í—ã—è–≤–ª–µ–Ω–∏–µ —É—Ç–µ—á–µ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ UI

–í—Å–µ –º–µ—Ç—Ä–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ Error Dashboard –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/system-status`:

### PostgreSQL –∫–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- ‚úÖ –í–µ—Ä—Å–∏—é –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (–±–∞–∑–æ–≤—ã–µ)
- ‚úÖ –†–∞–∑–º–µ—Ä –ë–î –≤ GB
- ‚úÖ Cache Hit Ratio —Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–º (–∑–µ–ª–µ–Ω—ã–π > 95%, –∂–µ–ª—Ç—ã–π < 95%)
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (commits/rollbacks –≤ —Å–µ–∫—É–Ω–¥—É)
- ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ deadlocks (–µ—Å–ª–∏ > 0)
- ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –æ–∂–∏–¥–∞—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö (–µ—Å–ª–∏ > 0)

### Redis –∫–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- ‚úÖ –í–µ—Ä—Å–∏—é –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (–±–∞–∑–æ–≤—ã–µ)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–º (–∑–µ–ª–µ–Ω—ã–π < 75%, –∂–µ–ª—Ç—ã–π 75-90%, –∫—Ä–∞—Å–Ω—ã–π > 90%)
- ‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª—é—á–µ–π (–≤—Å–µ–≥–æ, evicted)
- ‚úÖ Cache Hit Ratio —Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–º (–∑–µ–ª–µ–Ω—ã–π > 80%, –∂–µ–ª—Ç—ã–π < 80%)
- ‚úÖ –ö–æ–º–∞–Ω–¥ –≤ —Å–µ–∫—É–Ω–¥—É

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ PostgreSQL
**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Cache Hit Ratio - –µ—Å–ª–∏ < 95%, —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏—á–∏–Ω–æ–π
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–∂–∏–¥–∞—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ - –µ—Å–ª–∏ > 0, –µ—Å—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ deadlocks - –µ—Å–ª–∏ > 0, –Ω—É–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ**:
- –£–≤–µ–ª–∏—á–∏—Ç—å `shared_buffers` –≤ PostgreSQL
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –ü–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏–∫—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: Redis –ø–µ—Ä–µ–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–∞–º—è—Ç—å—é
**–ü—Ä–æ–±–ª–µ–º–∞**: Redis —É–¥–∞–ª—è–µ—Ç –∫–ª—é—á–∏ (evicted keys > 0)

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ - –µ—Å–ª–∏ > 90%, –∫—Ä–∏—Ç–∏—á–Ω–æ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ evicted keys - –µ—Å–ª–∏ > 0, –ø–∞–º—è—Ç—å –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∞

**–†–µ—à–µ–Ω–∏–µ**:
- –£–≤–µ–ª–∏—á–∏—Ç—å `maxmemory` –≤ Redis
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å TTL –∫–ª—é—á–µ–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—É—é –ø–æ–ª–∏—Ç–∏–∫—É eviction
- –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å Redis (–∫–ª–∞—Å—Ç–µ—Ä)

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ù–∏–∑–∫–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
**–ü—Ä–æ–±–ª–µ–º–∞**: –ú–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î, —Ö–æ—Ç—è –µ—Å—Ç—å Redis

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Redis Cache Hit Ratio - –µ—Å–ª–∏ < 80%, –∫—ç—à –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª—é—á–µ–π - –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–∏—à–∫–æ–º –º–∞–ª–æ

**–†–µ—à–µ–Ω–∏–µ**:
- –£–≤–µ–ª–∏—á–∏—Ç—å –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫–ª—é—á–µ–π (TTL)
- –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫—ç—à–∞

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
**–ó–∞–¥–∞—á–∞**: –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –ë–î

**–ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**:
1. **PostgreSQL**:
   - –†–∞–∑–º–µ—Ä –ë–î - —Ä–∞—Å—Ç–µ—Ç –ª–∏ –±—ã—Å—Ç—Ä–æ?
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π - –±–ª–∏–∑–∫–æ –∫ –ª–∏–º–∏—Ç—É?
   - Cache Hit Ratio - –ø–∞–¥–∞–µ—Ç –ª–∏?

2. **Redis**:
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ - —Ä–∞—Å—Ç–µ—Ç –ª–∏?
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª—é—á–µ–π - —Ä–∞—Å—Ç–µ—Ç –ª–∏?
   - –ö–æ–º–∞–Ω–¥ –≤ —Å–µ–∫—É–Ω–¥—É - —Ä–∞—Å—Ç–µ—Ç –ª–∏ –Ω–∞–≥—Ä—É–∑–∫–∞?

**–†–µ—à–µ–Ω–∏–µ**:
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏
- –ü–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞—Ä–∞–Ω–µ–µ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é –¥–ª—è —á—Ç–µ–Ω–∏—è

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ø–æ—Ä–æ–≥–∏ –¥–ª—è –∞–ª–µ—Ä—Ç–æ–≤:

### PostgreSQL
- ‚ö†Ô∏è **Cache Hit Ratio < 90%** - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
- üî¥ **Cache Hit Ratio < 85%** - –∫—Ä–∏—Ç–∏—á–Ω–æ
- ‚ö†Ô∏è **Deadlocks > 0** - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
- ‚ö†Ô∏è **–û–∂–∏–¥–∞—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ > 5** - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
- ‚ö†Ô∏è **–†–∞–∑–º–µ—Ä –ë–î > 80% –¥–∏—Å–∫–∞** - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ

### Redis
- ‚ö†Ô∏è **–ü–∞–º—è—Ç—å > 75%** - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
- üî¥ **–ü–∞–º—è—Ç—å > 90%** - –∫—Ä–∏—Ç–∏—á–Ω–æ
- ‚ö†Ô∏è **Evicted keys > 0** - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
- ‚ö†Ô∏è **Cache Hit Ratio < 70%** - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
- ‚ö†Ô∏è **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–π > 80% –ª–∏–º–∏—Ç–∞** - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### PromQL –∑–∞–ø—Ä–æ—Å—ã

–í—Å–µ –º–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ Prometheus Query API. –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:

```promql
# –†–∞–∑–º–µ—Ä –ë–î PostgreSQL
sum(pg_database_size_bytes)

# Cache Hit Ratio PostgreSQL
sum(pg_stat_database_blks_hit) / (sum(pg_stat_database_blks_hit) + sum(pg_stat_database_blks_read)) * 100

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ Redis
redis_memory_used_bytes / redis_memory_max_bytes * 100

# Cache Hit Ratio Redis
sum(rate(redis_keyspace_hits[5m])) / (sum(rate(redis_keyspace_hits[5m])) + sum(rate(redis_keyspace_misses[5m]))) * 100
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–ï—Å–ª–∏ –º–µ—Ç—Ä–∏–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞:
- –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `undefined` –¥–ª—è —ç—Ç–æ–π –º–µ—Ç—Ä–∏–∫–∏
- UI –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- –û—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –í—Å–µ –º–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ `Promise.all()`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ Prometheus (15 —Å–µ–∫—É–Ω–¥)
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API: ~100-300ms –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –º–µ—Ç—Ä–∏–∫

