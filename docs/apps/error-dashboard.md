# Error Dashboard (@gafus/error-dashboard)

## üìã –û–±–∑–æ—Ä

Error Dashboard - —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—à–∏–±–æ–∫ –∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –≤—Å–µ–π —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã GAFUS. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞, –∞–Ω–∞–ª–∏–∑–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–∫–∞–º–∏, –≤–æ–∑–Ω–∏–∫–∞—é—â–∏–º–∏ –≤–æ –≤—Å–µ—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö.

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫
- **üîç –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Å–±–æ—Ä** –æ—à–∏–±–æ–∫ –∏–∑ –≤—Å–µ—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- **üìä –ê–Ω–∞–ª–∏–∑ –∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞** –æ—à–∏–±–æ–∫ –ø–æ —Ç–∏–ø–∞–º –∏ —á–∞—Å—Ç–æ—Ç–µ
- **üö® –ê–ª–µ—Ä—Ç–∏–Ω–≥** –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö
- **üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** –∏ —Ç—Ä–µ–Ω–¥—ã –æ—à–∏–±–æ–∫

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∞–º–∏
- **‚úÖ –û—Ç–º–µ—Ç–∫–∞ –∫–∞–∫ —Ä–µ—à–µ–Ω–Ω—ã–µ** –æ—à–∏–±–∫–∏
- **üè∑Ô∏è –¢–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –æ—à–∏–±–æ–∫ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏
- **üë§ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ** –æ—à–∏–±–æ–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º
- **üìù –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** –∏ –∑–∞–º–µ—Ç–∫–∏ –ø–æ –æ—à–∏–±–∫–∞–º

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
- **üìä –î–∞—à–±–æ—Ä–¥** —Å –∫–ª—é—á–µ–≤—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏
- **üìà –ì—Ä–∞—Ñ–∏–∫–∏** —á–∞—Å—Ç–æ—Ç—ã –æ—à–∏–±–æ–∫
- **üîç –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** –∏ –ø–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
- **üì§ –≠–∫—Å–ø–æ—Ä—Ç** –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã
- **üñ•Ô∏è –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤** (web, trainer-panel, admin-panel, bull-board)
- **üíæ –°–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö** (PostgreSQL, Redis)
- **üìä –°–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏** (CPU, Memory, Uptime)
- **‚ö° Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** —Å—Ç–∞—Ç—É—Å–∞ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥—è–º–∏
- **üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—Å–µ—Ö –æ—á–µ—Ä–µ–¥–µ–π** (push, reengagement, examCleanup)
- **üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–¥–∞—á** (waiting, active, completed, failed, delayed)
- **‚ö†Ô∏è –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø** –∫ –ø—Ä–æ–±–ª–µ–º–Ω—ã–º –∑–∞–¥–∞—á–∞–º
- **üîÑ –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫** failed jobs (–æ–¥–∏–Ω–æ—á–Ω—ã–π –∏ –º–∞—Å—Å–æ–≤—ã–π)
- **üóëÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏** (retry, remove, promote)

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```
apps/error-dashboard/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ app/                    # App Router —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/               # API endpoints
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/          # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ csrf-token/    # CSRF —Ç–æ–∫–µ–Ω—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ debug/         # –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ push-logs/     # Push –ª–æ–≥–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ queues/        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥—è–º–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ jobs/      # –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ retry/     # –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ stats/     # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ report/        # –û—Ç—á–µ—Ç—ã –æ–± –æ—à–∏–±–∫–∞—Ö
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ system-status/ # –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login/             # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ push-logs/         # –ü—Ä–æ—Å–º–æ—Ç—Ä push –ª–æ–≥–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ queues/            # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—á–µ—Ä–µ–¥–µ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ system-status/     # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx           # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îú‚îÄ‚îÄ features/              # –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ errors/            # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∞–º–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ components/    # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ—à–∏–±–æ–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ queues/            # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥—è–º–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ components/    # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ—á–µ—Ä–µ–¥–µ–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ system/            # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ components/    # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å—Ç–∞—Ç—É—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ shared/                # –û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ contexts/          # React –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/             # React —Ö—É–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lib/               # –£—Ç–∏–ª–∏—Ç—ã –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ providers/         # Context –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
‚îÇ   ‚îî‚îÄ‚îÄ middleware.ts          # Middleware –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ public/                    # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
```

### API Endpoints
```typescript
// API —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
app/api/
‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îî‚îÄ‚îÄ route.ts              # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îú‚îÄ‚îÄ csrf-token/
‚îÇ   ‚îî‚îÄ‚îÄ route.ts              # –ü–æ–ª—É—á–µ–Ω–∏–µ CSRF —Ç–æ–∫–µ–Ω–∞
‚îú‚îÄ‚îÄ debug/
‚îÇ   ‚îî‚îÄ‚îÄ route.ts              # –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
‚îú‚îÄ‚îÄ push-logs/
‚îÇ   ‚îî‚îÄ‚îÄ route.ts              # Push –ª–æ–≥–∏
‚îú‚îÄ‚îÄ queues/
‚îÇ   ‚îú‚îÄ‚îÄ jobs/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ route.ts          # –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á –∏–∑ –æ—á–µ—Ä–µ–¥–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ retry/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ route.ts          # –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –∑–∞–¥–∞—á
‚îÇ   ‚îî‚îÄ‚îÄ stats/
‚îÇ       ‚îî‚îÄ‚îÄ route.ts          # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π
‚îú‚îÄ‚îÄ report/
‚îÇ   ‚îî‚îÄ‚îÄ route.ts              # –û—Ç—á–µ—Ç—ã –æ–± –æ—à–∏–±–∫–∞—Ö
‚îî‚îÄ‚îÄ system-status/
    ‚îî‚îÄ‚îÄ route.ts              # –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã –∏ –º–µ—Ç—Ä–∏–∫–∏
```

## üé® UI –∏ UX

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

#### Dashboard (–ì–ª–∞–≤–Ω–∞—è)
- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫
- –¢–æ–ø –æ—à–∏–±–æ–∫ –ø–æ —á–∞—Å—Ç–æ—Ç–µ
- –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏

#### –°–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫
- –¢–∞–±–ª–∏—Ü–∞ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ç–∏–ø–∞–º –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º
- –°—Ç–∞—Ç—É—Å—ã (–Ω–æ–≤—ã–µ, –≤ —Ä–∞–±–æ—Ç–µ, —Ä–µ—à–µ–Ω–Ω—ã–µ)
- –ü–æ–∏—Å–∫ –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞

#### –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏
- –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–µ
- Stack trace –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç
- –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—Ç–∞—Ç—É—Å–∞
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –∑–∞–º–µ—Ç–∫–∏

#### Push-–ª–æ–≥–∏
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —É—Ä–æ–≤–Ω—é –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
- –ü–æ–∏—Å–∫ –ø–æ —Å–æ–æ–±—â–µ–Ω–∏—è–º
- –ò—Å—Ç–æ—Ä–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

#### –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –°–æ—Å—Ç–æ—è–Ω–∏–µ PostgreSQL –∏ Redis
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU –∏ –ø–∞–º—è—Ç–∏
- –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã (uptime)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥—è–º–∏
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—Å–µ—Ö –æ—á–µ—Ä–µ–¥–µ–π (push, reengagement, examCleanup)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–¥–∞—á –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
- –°–ø–∏—Å–æ–∫ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∑–∞–¥–∞—á —Å –¥–µ—Ç–∞–ª—è–º–∏
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ failed jobs
- –ú–∞—Å—Å–æ–≤—ã–π retry –¥–ª—è –≤—Å–µ–π –æ—á–µ—Ä–µ–¥–∏
- –£–¥–∞–ª–µ–Ω–∏–µ –∏ –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ –∑–∞–¥–∞—á

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

#### –§–∏–ª—å—Ç—Ä—ã –æ—à–∏–±–æ–∫
```typescript
import { useErrorFilters } from '@/shared/hooks/useErrorFilters';

function ErrorFilters() {
  const { filters, setFilters } = useErrorFilters();

  return (
    <div className="filters">
      <Select
        value={filters.appName}
        onChange={(value) => setFilters({ ...filters, appName: value })}
      >
        <Option value="">–í—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</Option>
        <Option value="web">Web App</Option>
        <Option value="trainer-panel">Trainer Panel</Option>
        <Option value="telegram-bot">Telegram Bot</Option>
      </Select>

      <Select
        value={filters.environment}
        onChange={(value) => setFilters({ ...filters, environment: value })}
      >
        <Option value="">–í—Å–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è</Option>
        <Option value="development">Development</Option>
        <Option value="production">Production</Option>
      </Select>

      <Select
        value={filters.status}
        onChange={(value) => setFilters({ ...filters, status: value })}
      >
        <Option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</Option>
        <Option value="unresolved">–ù–µ —Ä–µ—à–µ–Ω—ã</Option>
        <Option value="resolved">–†–µ—à–µ–Ω—ã</Option>
      </Select>
    </div>
  );
}
```

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫
```typescript
function ErrorStats() {
  const { data: stats } = useErrorStats();

  return (
    <div className="stats-grid">
      <StatCard
        title="–í—Å–µ–≥–æ –æ—à–∏–±–æ–∫"
        value={stats?.totalErrors}
        trend={stats?.errorsTrend}
        icon={<ErrorIcon />}
      />
      <StatCard
        title="–ù–æ–≤—ã—Ö —Å–µ–≥–æ–¥–Ω—è"
        value={stats?.newToday}
        trend={stats?.newTodayTrend}
        icon={<NewIcon />}
      />
      <StatCard
        title="–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö"
        value={stats?.critical}
        trend={stats?.criticalTrend}
        icon={<WarningIcon />}
      />
      <StatCard
        title="–†–µ—à–µ–Ω–Ω—ã—Ö"
        value={stats?.resolved}
        trend={stats?.resolvedTrend}
        icon={<CheckIcon />}
      />
    </div>
  );
}
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –°–±–æ—Ä –æ—à–∏–±–æ–∫
```typescript
// API endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç—á–µ—Ç–æ–≤ –æ–± –æ—à–∏–±–∫–∞—Ö
// app/api/report/route.ts
import { NextRequest, NextResponse } from 'next/server';
import { prisma } from '@gafus/prisma';
import { logger } from '@gafus/logger';

export async function POST(request: NextRequest) {
  try {
    const errorData = await request.json();
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
    const validatedData = validateErrorReport(errorData);
    
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
    const errorReport = await prisma.errorReport.create({
      data: {
        message: validatedData.message,
        stack: validatedData.stack,
        appName: validatedData.appName,
        environment: validatedData.environment,
        url: validatedData.url,
        userAgent: validatedData.userAgent,
        userId: validatedData.userId,
        sessionId: validatedData.sessionId,
        componentStack: validatedData.componentStack,
        additionalContext: validatedData.additionalContext,
        tags: validatedData.tags || []
      }
    });

    logger.info('Error report received', {
      errorId: errorReport.id,
      appName: validatedData.appName,
      message: validatedData.message
    });

    return NextResponse.json({ success: true, errorId: errorReport.id });
    
  } catch (error) {
    logger.error('Failed to process error report', { error: error.message });
    return NextResponse.json(
      { success: false, error: 'Failed to process error report' },
      { status: 500 }
    );
  }
}
```

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫
```typescript
// –•—É–∫ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –æ—à–∏–±–æ–∫
export function useErrorFilters() {
  const [filters, setFilters] = useState({
    appName: '',
    environment: '',
    status: 'unresolved',
    dateRange: '7d',
    search: ''
  });

  const { data: errors, isLoading } = useQuery({
    queryKey: ['errors', filters],
    queryFn: () => fetchErrors(filters)
  });

  return {
    filters,
    setFilters,
    errors,
    isLoading
  };
}

// –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ—à–∏–±–æ–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
async function fetchErrors(filters: ErrorFilters) {
  const params = new URLSearchParams();
  
  if (filters.appName) params.append('appName', filters.appName);
  if (filters.environment) params.append('environment', filters.environment);
  if (filters.status) params.append('resolved', filters.status === 'resolved' ? 'true' : 'false');
  if (filters.search) params.append('search', filters.search);
  
  const response = await fetch(`/api/errors?${params}`);
  return response.json();
}
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞–º–∏
```typescript
// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –æ—à–∏–±–∫–∏
function ErrorStatusActions({ error }: { error: ErrorReport }) {
  const queryClient = useQueryClient();
  
  const updateStatus = useMutation({
    mutationFn: (status: 'resolved' | 'unresolved') => 
      updateErrorStatus(error.id, status),
    onSuccess: () => {
      queryClient.invalidateQueries(['errors']);
    }
  });

  const addTag = useMutation({
    mutationFn: (tag: string) => addErrorTag(error.id, tag),
    onSuccess: () => {
      queryClient.invalidateQueries(['errors']);
    }
  });

  return (
    <div className="error-actions">
      <Button
        onClick={() => updateStatus.mutate('resolved')}
        disabled={error.resolved}
      >
        –û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ —Ä–µ—à–µ–Ω–Ω—É—é
      </Button>
      
      <Button
        onClick={() => updateStatus.mutate('unresolved')}
        disabled={!error.resolved}
      >
        –û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –Ω–µ —Ä–µ—à–µ–Ω–Ω—É—é
      </Button>

      <TagInput onAddTag={(tag) => addTag.mutate(tag)} />
    </div>
  );
}
```

## üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥—è–º–∏

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π
```typescript
// API endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤—Å–µ—Ö –æ—á–µ—Ä–µ–¥–µ–π
// app/api/queues/stats/route.ts
import { pushQueue, reengagementQueue } from "@gafus/queues";

export async function GET() {
  // –ü–æ–ª—É—á–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –¥–ª—è –≤—Å–µ—Ö –æ—á–µ—Ä–µ–¥–µ–π –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
  const [pushStats, reengagementStats, examCleanupStats] = await Promise.all([
    getQueueStats("push", pushQueue),
    getQueueStats("reengagement", reengagementQueue),
    getQueueStats("examCleanup", examCleanupQueue),
  ]);

  const totalJobs = {
    waiting: queues.reduce((sum, q) => sum + q.waiting, 0),
    active: queues.reduce((sum, q) => sum + q.active, 0),
    completed: queues.reduce((sum, q) => sum + q.completed, 0),
    failed: queues.reduce((sum, q) => sum + q.failed, 0),
    delayed: queues.reduce((sum, q) => sum + q.delayed, 0),
  };

  return NextResponse.json({
    timestamp: new Date().toISOString(),
    queues: [pushStats, reengagementStats, examCleanupStats],
    totalJobs,
  });
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ failed jobs
```typescript
// API endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∑–∞–¥–∞—á
// app/api/queues/jobs/route.ts
export async function GET(request: NextRequest) {
  const queueName = searchParams.get("queue");
  const status = searchParams.get("status") || "failed";
  const limit = parseInt(searchParams.get("limit") || "50", 10);

  // –ü–æ–ª—É—á–∞–µ–º –∑–∞–¥–∞—á–∏ –∏–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏
  const queue = getQueueByName(queueName);
  const jobs = await queue.getFailed(0, limit - 1);

  return NextResponse.json({
    timestamp: new Date().toISOString(),
    jobs: jobs.map((job) => ({
      id: job.id,
      name: job.name,
      queueName,
      data: job.data,
      failedReason: job.failedReason,
      stacktrace: job.stacktrace,
      attemptsMade: job.attemptsMade,
      timestamp: job.timestamp,
    })),
    count: jobs.length,
  });
}
```

### –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –∑–∞–¥–∞—á
```typescript
// API endpoint –¥–ª—è retry –∑–∞–¥–∞—á
// app/api/queues/retry/route.ts

// –û–¥–∏–Ω–æ—á–Ω—ã–π retry
export async function POST(request: NextRequest) {
  const { queueName, jobId, action } = await request.json();

  const queue = getQueueByName(queueName);
  const job = await queue.getJob(jobId);

  switch (action) {
    case "retry":
      await job.retry();
      break;
    case "remove":
      await job.remove();
      break;
    case "promote":
      await job.promote();
      break;
  }

  return NextResponse.json({ success: true });
}

// –ú–∞—Å—Å–æ–≤—ã–π retry
export async function PUT(request: NextRequest) {
  const { queueName } = await request.json();

  const queue = getQueueByName(queueName);
  const failedJobs = await queue.getFailed(0, -1);

  // –ü–æ–≤—Ç–æ—Ä–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ–º –≤—Å–µ failed jobs
  await Promise.allSettled(failedJobs.map((job) => job.retry()));

  return NextResponse.json({ success: true });
}
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ—á–µ—Ä–µ–¥–µ–π
```typescript
// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –æ—á–µ—Ä–µ–¥–∏
import { QueueStatsCard } from "@features/queues/components/QueueStatsCard";

function QueuesStats() {
  const { data } = useQueuesStats();

  return (
    <Box display="grid" gridTemplateColumns="repeat(3, 1fr)" gap={3}>
      {data?.queues.map((queueStats) => (
        <QueueStatsCard
          key={queueStats.name}
          stats={queueStats}
          onClick={() => handleQueueClick(queueStats.name)}
        />
      ))}
    </Box>
  );
}
```

### –°–ø–∏—Å–æ–∫ failed jobs
```typescript
// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∑–∞–¥–∞—á
import { FailedJobsList } from "@features/queues/components/FailedJobsList";
import { useQueueJobs, useRetryJob } from "@shared/hooks/useQueueJobs";

function FailedJobs() {
  const { data } = useQueueJobs(undefined, "failed", 50);
  const retryJob = useRetryJob();

  const handleRetry = async (job: FailedJob) => {
    await retryJob.mutateAsync({
      queueName: job.queueName,
      jobId: job.id,
      action: "retry",
    });
  };

  return <FailedJobsList jobs={data?.jobs || []} />;
}
```

### –ú–∞—Å—Å–æ–≤—ã–π retry
```typescript
// –•—É–∫ –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ retry
import { useBulkRetry } from "@shared/hooks/useQueueJobs";

function BulkRetryButton({ queueName }: { queueName: string }) {
  const bulkRetry = useBulkRetry();

  const handleBulkRetry = async () => {
    await bulkRetry.mutateAsync({ queueName });
  };

  return (
    <Button
      onClick={handleBulkRetry}
      disabled={bulkRetry.isPending}
      startIcon={<RetryIcon />}
    >
      –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –≤—Å–µ
    </Button>
  );
}
```

## üñ•Ô∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã

### –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤

–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø—Ä—è–º—ã–µ HTTP health-check –∑–∞–ø—Ä–æ—Å—ã –∫ –∫–∞–∂–¥–æ–º—É —Å–µ—Ä–≤–∏—Å—É.

```typescript
// API endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã
// app/api/system-status/route.ts
import { NextResponse } from "next/server";

export async function GET() {
  try {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤ —á–µ—Ä–µ–∑ health endpoints
    const [webStatus, trainerStatus, adminStatus, bullBoardStatus] = 
      await Promise.all([
        checkServiceHealth("Web App", "http://web:3000/api/health"),
        checkServiceHealth("Trainer Panel", "http://trainer-panel:3001/api/health"),
        checkServiceHealth("Admin Panel", "http://admin-panel:3006/api/health"),
        checkServiceHealth("Bull Board", "http://bull-board:3002/health"),
      ]);

    return NextResponse.json({
      timestamp: new Date().toISOString(),
      services: [webStatus, trainerStatus, adminStatus, bullBoardStatus],
    });
  } catch (error) {
    return NextResponse.json(
      { error: "Failed to get system status" },
      { status: 500 }
    );
  }
}
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å—Ç–∞—Ç—É—Å–∞
```typescript
// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–∞
import { ServiceStatusCard } from "@features/system/components/ServiceStatusCard";

function SystemStatus() {
  const { data, refetch } = useSystemStatus();

  return (
    <Grid container spacing={3}>
      {data?.services.map((service) => (
        <Grid item xs={12} sm={6} md={4} lg={3} key={service.name}>
          <ServiceStatusCard service={service} />
        </Grid>
      ))}
    </Grid>
  );
}
```

### –°–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
```typescript
// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
import { SystemMetricsCard } from "@features/system/components/SystemMetricsCard";

function SystemMetrics() {
  const { data } = useSystemStatus();

  if (!data) return null;

  return <SystemMetricsCard metrics={data.metrics} />;
}
```

### –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —Ä–∞–∑–¥–µ–ª–∞–º–∏
```typescript
// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —Å –≤–∫–ª–∞–¥–∫–∞–º–∏
import { NavigationTabs } from "@shared/components/NavigationTabs";

function Layout({ children }) {
  return (
    <>
      <NavigationTabs />
      {children}
    </>
  );
}
```

## üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã

### –î–∞—à–±–æ—Ä–¥ –º–µ—Ç—Ä–∏–∫–∏
```typescript
// –•—É–∫ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
export function useErrorStats() {
  return useQuery({
    queryKey: ['error-stats'],
    queryFn: fetchErrorStats,
    refetchInterval: 30000 // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
  });
}

// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≥—Ä–∞—Ñ–∏–∫–∞ –æ—à–∏–±–æ–∫
function ErrorTrendChart() {
  const { data: trendData } = useQuery({
    queryKey: ['error-trend'],
    queryFn: fetchErrorTrend
  });

  return (
    <ResponsiveContainer width="100%" height={300}>
      <LineChart data={trendData}>
        <CartesianGrid strokeDasharray="3 3" />
        <XAxis dataKey="date" />
        <YAxis />
        <Tooltip />
        <Legend />
        <Line type="monotone" dataKey="total" stroke="#8884d8" />
        <Line type="monotone" dataKey="critical" stroke="#ff7300" />
        <Line type="monotone" dataKey="resolved" stroke="#82ca9d" />
      </LineChart>
    </ResponsiveContainer>
  );
}
```

### –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
```typescript
// –§—É–Ω–∫—Ü–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –æ—à–∏–±–æ–∫
async function exportErrors(filters: ErrorFilters, format: 'csv' | 'json') {
  const params = new URLSearchParams();
  Object.entries(filters).forEach(([key, value]) => {
    if (value) params.append(key, value);
  });
  params.append('format', format);

  const response = await fetch(`/api/errors/export?${params}`);
  const blob = await response.blob();
  
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `errors-${new Date().toISOString().split('T')[0]}.${format}`;
  a.click();
}
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
```typescript
// Middleware –¥–ª—è –∑–∞—â–∏—Ç—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤
import { withAuth } from 'next-auth/middleware';

export default withAuth({
  callbacks: {
    authorized: ({ token }) => {
      // –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
      return token?.role === 'ADMIN';
    },
  },
});

export const config = {
  matcher: ['/dashboard/:path*', '/api/:path*']
};
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
```typescript
// –°—Ö–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–æ–≤ –æ–± –æ—à–∏–±–∫–∞—Ö
import { z } from 'zod';

const ErrorReportSchema = z.object({
  message: z.string().min(1),
  stack: z.string().optional(),
  appName: z.enum(['web', 'trainer-panel', 'telegram-bot', 'error-dashboard']),
  environment: z.enum(['development', 'production', 'staging']),
  url: z.string().url().optional(),
  userAgent: z.string().optional(),
  userId: z.string().optional(),
  sessionId: z.string().optional(),
  componentStack: z.string().optional(),
  additionalContext: z.record(z.any()).optional(),
  tags: z.array(z.string()).default([])
});

function validateErrorReport(data: unknown) {
  return ErrorReportSchema.parse(data);
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –æ—à–∏–±–æ–∫

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã error-dashboard –º–æ–∂–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –æ—à–∏–±–∫–∏ –∏–∑ –≤—Å–µ—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ –ø–∞–∫–µ—Ç–æ–≤.

#### –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—à–∏–±–æ–∫:

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã (–≤—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –ø–∞–∫–µ—Ç—ã)
pnpm test:errors

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
node scripts/generate-test-errors.js web
node scripts/generate-test-errors.js logger
node scripts/generate-test-errors.js auth

# –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
node scripts/generate-test-errors.js --help
```

#### –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–µ—Å—Ç—ã

- `logger` - –æ—à–∏–±–∫–∏ –∏–∑ –ø–∞–∫–µ—Ç–∞ logger
- `error-handling` - –æ—à–∏–±–∫–∏ –∏–∑ –ø–∞–∫–µ—Ç–∞ error-handling
- `auth` - –æ—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `prisma` - –æ—à–∏–±–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- `queues` - –æ—à–∏–±–∫–∏ –æ—á–µ—Ä–µ–¥–µ–π
- `webpush` - –æ—à–∏–±–∫–∏ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `csrf` - –æ—à–∏–±–∫–∏ CSRF –∑–∞—â–∏—Ç—ã
- `types` - –æ—à–∏–±–∫–∏ —Ç–∏–ø–æ–≤
- `react-query` - –æ—à–∏–±–∫–∏ React Query
- `web` - –æ—à–∏–±–∫–∏ web –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `trainer-panel` - –æ—à–∏–±–∫–∏ trainer panel
- `telegram-bot` - –æ—à–∏–±–∫–∏ telegram –±–æ—Ç–∞
- `bull-board` - –æ—à–∏–±–∫–∏ bull board

#### –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã

–ö–∞–∂–¥—ã–π –ø–∞–∫–µ—Ç/–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–º–µ–µ—Ç —Å–≤–æ–π —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:

```bash
# Logger
node packages/logger/test-error-dashboard.js

# Error Handling
node packages/error-handling/test-error-handling-error-dashboard.js

# Web –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
node apps/web/test-web-error-dashboard.js

# Trainer Panel
node apps/trainer-panel/test-trainer-panel-error-dashboard.js
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ error-dashboard:

- **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞**: http://localhost:3001
- **Push Logs**: http://localhost:3001/push-logs
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: http://localhost:3001/stats

–û—à–∏–±–∫–∏ –ø–æ—è–≤—è—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ä–∞–∑–¥–µ–ª–∞—Ö —Å —Ç–µ–≥–∞–º–∏ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º.

### Unit —Ç–µ—Å—Ç—ã
```typescript
import { render, screen, fireEvent } from '@testing-library/react';
import { ErrorList } from './ErrorList';

test('should filter errors by app name', () => {
  const mockErrors = [
    { id: '1', appName: 'web', message: 'Test error 1' },
    { id: '2', appName: 'trainer-panel', message: 'Test error 2' }
  ];

  render(<ErrorList errors={mockErrors} />);
  
  fireEvent.change(screen.getByLabelText('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ'), {
    target: { value: 'web' }
  });
  
  expect(screen.getByText('Test error 1')).toBeInTheDocument();
  expect(screen.queryByText('Test error 2')).not.toBeInTheDocument();
});
```

### Integration —Ç–µ—Å—Ç—ã
```typescript
import { test, expect } from '@playwright/test';

test('should create error report', async ({ page }) => {
  await page.goto('/');
  
  // –°–∏–º—É–ª—è—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç—á–µ—Ç–∞ –æ–± –æ—à–∏–±–∫–µ
  await page.evaluate(() => {
    return fetch('/api/report', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        message: 'Test error',
        appName: 'web',
        environment: 'development'
      })
    });
  });
  
  await page.reload();
  await expect(page.locator('[data-testid="error-item"]')).toBeVisible();
});
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```env
# Next.js
NEXT_PUBLIC_APP_URL=https://errors.gafus.ru
NEXTAUTH_URL=https://errors.gafus.ru
NEXTAUTH_SECRET=your-secret

# Database
DATABASE_URL=postgresql://user:password@localhost:5432/gafus

# Error Dashboard
ERROR_DASHBOARD_API_KEY=your-api-key
ERROR_SAMPLE_RATE=1.0
```

### Docker
```dockerfile
FROM node:18-alpine AS base
WORKDIR /app

FROM base AS deps
COPY package*.json ./
RUN npm ci

FROM base AS build
COPY --from=deps /app/node_modules ./node_modules
COPY . .
RUN npm run build

FROM base AS runtime
COPY --from=build /app/.next ./.next
COPY --from=build /app/public ./public
EXPOSE 3000
CMD ["npm", "start"]
```

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
pnpm dev                    # –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–ø–æ—Ä—Ç 3000)
pnpm build                  # –°–±–æ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
pnpm start                  # –ó–∞–ø—É—Å–∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω –≤–µ—Ä—Å–∏–∏

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
pnpm test                   # –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
pnpm test:e2e              # E2E —Ç–µ—Å—Ç—ã
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
```typescript
// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ—à–∏–±–æ–∫
features/errors/components/
‚îú‚îÄ‚îÄ ErrorList.tsx           # –°–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫
‚îú‚îÄ‚îÄ ErrorDetail.tsx         # –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏
‚îú‚îÄ‚îÄ ErrorFilters.tsx        # –§–∏–ª—å—Ç—Ä—ã
‚îú‚îÄ‚îÄ ErrorStats.tsx          # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚îú‚îÄ‚îÄ ErrorChart.tsx          # –ì—Ä–∞—Ñ–∏–∫–∏
‚îî‚îÄ‚îÄ ErrorActions.tsx        # –î–µ–π—Å—Ç–≤–∏—è —Å –æ—à–∏–±–∫–∞–º–∏
```

---

*Error Dashboard –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∞–º–∏ –¥–ª—è –≤—Å–µ–π —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã GAFUS.*
