# üöÄ –£–ª—É—á—à–µ–Ω–∏—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—Ñ–ª–∞–π–Ω —Ä–∞–±–æ—Ç—ã

## üìã –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. üîÑ –°–∏—Å—Ç–µ–º–∞ —Ä–µ—Ç—Ä–∞–µ–≤ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
- **–§–∞–π–ª**: `apps/web/src/shared/utils/retryUtils.ts`
- **–§—É–Ω–∫—Ü–∏–∏**:
  - `retryWithBackoff()` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ä–µ—Ç—Ä–∞–µ–≤
  - `retryServerAction()` - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–ª—è —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
  - –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞: 1s ‚Üí 2s ‚Üí 4s ‚Üí 8s ‚Üí 10s (–º–∞–∫—Å)
  - –ú–∞–∫—Å–∏–º—É–º 3 –ø–æ–ø—ã—Ç–∫–∏
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–π –ø–æ–ø—ã—Ç–∫–∏
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –æ—Ñ–ª–∞–π–Ω –æ—á–µ—Ä–µ–¥—å –ø—Ä–∏ –∏—Å—á–µ—Ä–ø–∞–Ω–∏–∏ –ø–æ–ø—ã—Ç–æ–∫

### 2. üìä –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- **–§–∞–π–ª**: `apps/web/src/shared/hooks/useSyncStatus.ts`
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç**: `apps/web/src/shared/components/ui/SyncStatusIndicator.tsx`
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
  - –°—á–µ—Ç—á–∏–∫ –æ–∂–∏–¥–∞—é—â–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
  - –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
  - –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (üîÑ ‚è≥ ‚úÖ)

### 3. üß™ –¢–µ—Å—Ç–µ—Ä –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- **–§–∞–π–ª**: `apps/web/src/shared/components/ui/CacheTester.tsx`
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∫—ç—à–µ–π (HTML, RSC, STATIC, IMAGES, COURSE_DATA)
  - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ñ–ª–∞–π–Ω –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
  - –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–µ–π
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
  - –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞–∂–¥–æ–º—É –∫—ç—à—É

### 4. üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- **–§–∞–π–ª**: `apps/web/src/shared/utils/cacheManager.ts`
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
  - –£–¥–∞–ª–µ–Ω–∞ –¥—É–±–ª–∏—Ä—É—é—â–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è React Query –∫—ç—à–∞
  - –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –≤ server actions
  - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ race conditions

### 5. ‚ö° –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **–§–∞–π–ª—ã**: `apps/web/src/shared/stores/timerStore.ts`
- **–§—É–Ω–∫—Ü–∏–∏**:
  - `startStepWithServer()` - —Å —Ä–µ—Ç—Ä–∞—è–º–∏
  - `finishStepWithServer()` - —Å —Ä–µ—Ç—Ä–∞—è–º–∏  
  - `resetStepWithServer()` - —Å —Ä–µ—Ç—Ä–∞—è–º–∏
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Ç—Ä–∞–∏ –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–∫–∞—Ö
  - Graceful fallback –≤ –æ—Ñ–ª–∞–π–Ω –æ—á–µ—Ä–µ–¥—å
  - –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è (v2)

### Service Worker –∫—ç—à–∏
```javascript
CACHES: {
  HTML_PAGES: 'gafus-html-v2',    // –°—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –æ—Ñ–ª–∞–π–Ω –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
  RSC_DATA: 'gafus-rsc-v2',       // RSC –¥–∞–Ω–Ω—ã–µ (5 –º–∏–Ω—É—Ç TTL)
  STATIC: 'gafus-static-v2',      // –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã
  IMAGES: 'gafus-images-v2',      // –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (30 –º–∏–Ω—É—Ç TTL)
  COURSE_DATA: 'gafus-course-v2', // –î–∞–Ω–Ω—ã–µ –∫—É—Ä—Å–æ–≤ (10 –º–∏–Ω—É—Ç TTL)
}
```

### –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- **HTML_PAGES**: `cacheFirst` - –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –æ—Ñ–ª–∞–π–Ω–∞
- **RSC_DATA**: `networkFirst` - –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **STATIC**: `cacheFirst` - —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
- **IMAGES**: `cacheFirst` - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
- **COURSE_DATA**: `networkFirst` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å courseStore

## üß™ –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
node scripts/test-caching.js
```

### 2. –ë—Ä–∞—É–∑–µ—Ä–Ω—ã–π —Ç–µ—Å—Ç
```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
open scripts/test-offline.html
```

### 3. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ç–µ—Å—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/trainings/beginner`
2. –ù–∞–π–¥–∏—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç "–¢–µ—Å—Ç–µ—Ä –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è"
3. –ù–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫—ç—à–∏"
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –æ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º

### 4. DevTools —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
1. **Application ‚Üí Service Workers** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é SW
2. **Application ‚Üí Storage ‚Üí Cache Storage** - –ø—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∫—ç—à–∏
3. **Network ‚Üí Offline** - –≤–∫–ª—é—á–∏—Ç–µ –æ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º
4. **Console** - —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏ —Ä–µ—Ç—Ä–∞–µ–≤

## üìà –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Ç—Ä–∞–∏ –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–±–æ—è—Ö —Å–µ—Ç–∏
- ‚úÖ Graceful degradation –≤ –æ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º–µ
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å  
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ TTL
- ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫—ç—à–∞
- ‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å courseStore

### UX
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –æ—Ñ–ª–∞–π–Ω —Å–æ—Å—Ç–æ—è–Ω–∏—è
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –≤ –æ—Ñ–ª–∞–π–Ω–µ

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏ —Ä–µ—Ç—Ä–∞–µ–≤
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
‚ö†Ô∏è –ü–æ–ø—ã—Ç–∫–∞ 1/3 –Ω–µ —É–¥–∞–ª–∞—Å—å: Network error
üîÑ –ó–∞–ø—É—Å–∫ —à–∞–≥–∞: –ø–æ–ø—ã—Ç–∫–∞ 2 –Ω–µ —É–¥–∞–ª–∞—Å—å: Timeout
‚ùå –í—Å–µ 3 –ø–æ–ø—ã—Ç–∫–∏ –∏—Å—á–µ—Ä–ø–∞–Ω—ã: Server unavailable
üìù –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –æ—á–µ—Ä–µ–¥—å –æ—Ñ–ª–∞–π–Ω —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
```

### –°—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- üîÑ "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è..." - –∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å
- ‚è≥ "–û–∂–∏–¥–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: 2" - –µ—Å—Ç—å –Ω–µ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- ‚úÖ "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ 30—Å –Ω–∞–∑–∞–¥" - –≤—Å–µ –≤ –ø–æ—Ä—è–¥–∫–µ

## üö® –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **POST –∑–∞–ø—Ä–æ—Å—ã** - –Ω–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è (–ø–æ –¥–∏–∑–∞–π–Ω—É Cache API)
2. **–ë–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã** - –º–æ–≥—É—Ç –Ω–µ –ø–æ–º–µ—Å—Ç–∏—Ç—å—Å—è –≤ –∫—ç—à
3. **–°—Ç–∞—Ä—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã** - Service Worker –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –Ω–µ –≤–µ–∑–¥–µ
4. **–ö–≤–æ—Ç—ã –∫—ç—à–∞** - –±—Ä–∞—É–∑–µ—Ä –º–æ–∂–µ—Ç –æ—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –ø—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ –º–µ—Å—Ç–∞

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### TTL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–≤ Service Worker)
```javascript
TTL: {
  HTML_PAGES: 24 * 60 * 60 * 1000,  // 24 —á–∞—Å–∞
  RSC_DATA: 5 * 60 * 1000,          // 5 –º–∏–Ω—É—Ç
  STATIC: 7 * 24 * 60 * 60 * 1000,  // 7 –¥–Ω–µ–π
  IMAGES: 30 * 60 * 1000,           // 30 –º–∏–Ω—É—Ç
  COURSE_DATA: 10 * 60 * 1000,      // 10 –º–∏–Ω—É—Ç
}
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ—Ç—Ä–∞–µ–≤
```javascript
// –í retryUtils.ts
{
  maxRetries: 3,        // –ú–∞–∫—Å–∏–º—É–º –ø–æ–ø—ã—Ç–æ–∫
  baseDelay: 1000,      // –ë–∞–∑–æ–≤–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (1—Å)
  maxDelay: 10000,      // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (10—Å)
}
```

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- **–ù–∞–¥–µ–∂–Ω—É—é —Ä–∞–±–æ—Ç—É** –≤ —É—Å–ª–æ–≤–∏—è—Ö –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Å–µ—Ç–∏
- **–ü—Ä–æ–∑—Ä–∞—á–Ω—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é** —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- **–£–¥–æ–±–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ production.
