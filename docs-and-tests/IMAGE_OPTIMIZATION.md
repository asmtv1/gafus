# Оптимизация изображений в приложении Гафус

## Обзор

Мы реализовали комплексную систему оптимизации изображений для улучшения производительности и пользовательского опыта.

## Компоненты

### 1. OptimizedImage

Переиспользуемый компонент для оптимизированной загрузки изображений:

```tsx
import OptimizedImage from "@/components/ui/OptimizedImage";

<OptimizedImage
  src={imageUrl}
  alt="Описание"
  width={480}
  height={270}
  index={0} // индекс в списке
  placeholder="/fallback.png"
  isAboveFold={true} // находится ли выше fold
  isCritical={false} // критично ли изображение
/>;
```

### 2. Утилиты оптимизации

Файл `utils/imageLoading.ts` содержит логику определения стратегии загрузки:

- `shouldUseLazyLoading()` - определяет, нужно ли использовать lazy loading
- `shouldUsePriority()` - определяет, нужно ли использовать priority

## Стратегии загрузки

### Приоритетная загрузка (priority)

Используется для:

- Первых 2 элементов в списке
- Изображений выше fold
- Критичных изображений (логотипы, аватары)

### Lazy loading

Используется для:

- Элементов ниже fold
- Изображений после 2-го в списке
- Не критичных изображений

## Применение в компонентах

### CourseCard

- Использует `OptimizedImage` с индексом
- Первые 2 курса загружаются с priority
- Остальные используют lazy loading

### Header

- Логотип и аватар: priority
- Иконки меню: lazy loading

### Statistics

- Аватар пользователя: priority
- Логотипы курсов: оптимизированная загрузка
- Аватары в отзывах: lazy loading

## Преимущества

1. **Улучшенная производительность**
   - Меньше одновременных запросов
   - Быстрая загрузка критичного контента

2. **Лучший UX**
   - Пользователи видят важный контент быстрее
   - Плавная загрузка остального контента

3. **Экономия трафика**
   - Загружаются только видимые изображения
   - Оптимизация для мобильных устройств

## Мониторинг

Для отслеживания эффективности оптимизации используйте:

- Core Web Vitals (LCP, FID, CLS)
- Network tab в DevTools
- Lighthouse Performance Score

## Будущие улучшения

1. **WebP формат** - конвертация изображений в WebP
2. **Responsive images** - использование srcSet для разных размеров экранов
3. **Blur placeholder** - размытые плейсхолдеры во время загрузки
4. **Intersection Observer** - более точное определение видимости
