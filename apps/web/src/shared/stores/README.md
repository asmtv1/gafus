# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å—Ç–æ—Ä–æ–≤ –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫

## üèóÔ∏è **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**

–í–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–≥–æ `trainingStore`, –º—ã —Ä–∞–∑–¥–µ–ª–∏–ª–∏ –ª–æ–≥–∏–∫—É –Ω–∞ —Ç—Ä–∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ç–æ—Ä–∞:

### 1. **`trainingStore`** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –¥–Ω–µ–π

- ‚úÖ –û—Ç–∫—Ä—ã—Ç—ã–µ/–∑–∞–∫—Ä—ã—Ç—ã–µ –¥–Ω–∏ (`openIndexes`)
- ‚úÖ –ê–∫—Ç–∏–≤–Ω—ã–µ —à–∞–≥–∏ (`runningSteps`)
- ‚úÖ –ù–∞–∑–Ω–∞—á–µ–Ω–∏—è –∫—É—Ä—Å–æ–≤ (`courseAssignments`)
- ‚úÖ –û—à–∏–±–∫–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π (`assignErrors`)

### 2. **`stepStore`** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —à–∞–≥–æ–≤

- ‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏—è —à–∞–≥–æ–≤ (`stepStates`)
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, –∑–∞–ø—É—Å–∫, –ø–∞—É–∑–∞, –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ, —Å–±—Ä–æ—Å
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ localStorage
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –û—á–∏—Å—Ç–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö

### 3. **`timerStore`** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞–º–∏

- ‚úÖ JavaScript —Ç–∞–π–º–µ—Ä—ã (`setInterval`)
- ‚úÖ –ó–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–∞–π–º–µ—Ä–æ–≤
- ‚úÖ Callback'–∏ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
- ‚úÖ –°–µ—Ä–≤–µ—Ä–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (start, finish, reset)

## üîÑ **–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**

### –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö:

```tsx
import { useStepStore } from "@shared/stores/stepStore";
import { useTimerStore } from "@shared/stores/timerStore";
import { useTrainingStore } from "@shared/stores/trainingStore";

function MyComponent() {
  // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–≥–∞–º–∏
  const { stepStates, startStep, pauseStep } = useStepStore();

  // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞–º–∏
  const { startTimer, stopTimer } = useTimerStore();

  // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–Ω—è–º–∏
  const { setRunningIndex, getRunningIndex } = useTrainingStore();

  // ... –ª–æ–≥–∏–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
}
```

## üéØ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**

1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏** - –∫–∞–∂–¥—ã–π —Å—Ç–æ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é –æ–±–ª–∞—Å—Ç—å
2. **–õ—É—á—à–∞—è —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** - –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —Å—Ç–æ—Ä –æ—Ç–¥–µ–ª—å–Ω–æ
3. **–õ–µ–≥—á–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å** - –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–º —Å—Ç–æ—Ä–µ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –¥—Ä—É–≥–∏–µ
4. **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** - —Ç–∞–π–º–µ—Ä—ã –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –¥—Ä—É–≥–∏—Ö —á–∞—Å—Ç—è—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
5. **–ß–∏—Å—Ç—ã–π –∫–æ–¥** - –∫–∞–∂–¥—ã–π —Å—Ç–æ—Ä –∏–º–µ–µ—Ç —á–µ—Ç–∫—É—é —Ü–µ–ª—å –∏ API

## üîß **–ú–∏–≥—Ä–∞—Ü–∏—è**

–°—Ç–∞—Ä—ã–π `trainingStore` –±—ã–ª —É–ø—Ä–æ—â–µ–Ω –∏ —Ç–µ–ø–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –ª–æ–≥–∏–∫—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–Ω—è–º–∏. –í—Å—è –ª–æ–≥–∏–∫–∞ —à–∞–≥–æ–≤ –∏ —Ç–∞–π–º–µ—Ä–æ–≤ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–æ—Ä—ã.

## üìù **–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**

### –ó–∞–ø—É—Å–∫ —à–∞–≥–∞:

```tsx
const { startStep } = useStepStore();
const { startTimer } = useTimerStore();

// –ó–∞–ø—É—Å–∫–∞–µ–º —à–∞–≥
startStep(courseId, day, stepIndex, durationSec);

// –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä
startTimer(
  courseId,
  day,
  stepIndex,
  (timeLeft) => updateTimeLeft(timeLeft), // callback –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
  () => finishStep(), // callback –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
);
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è:

```tsx
const { restoreStepFromLS } = useStepStore();

// –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —à–∞–≥ –∏–∑ localStorage
const restoredState = restoreStepFromLS(courseId, day, stepIndex);
if (restoredState) {
  // –®–∞–≥ –±—ã–ª –∞–∫—Ç–∏–≤–µ–Ω, –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä
}
```
