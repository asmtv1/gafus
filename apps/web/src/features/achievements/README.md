# üèÜ –°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π —Å SWR

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–∞ —Å Server Components –Ω–∞ SWR –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ SWR –ø–æ–¥—Ö–æ–¥–∞

### ‚úÖ –ß—Ç–æ –ø–æ–ª—É—á–∏–ª–∏:
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ 5 –º–∏–Ω—É—Ç** - –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ä–µ–¥–∫–æ –∏–∑–º–µ–Ω—è—é—Ç—Å—è
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫—É—Ä—Å–æ–≤
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π** –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—à–∏–±–æ–∫
- **–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–æ –≤—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏** –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (3 –ø–æ–ø—ã—Ç–∫–∏ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 5 —Å–µ–∫—É–Ω–¥)

### ‚ùå –ß—Ç–æ —É–±—Ä–∞–ª–∏:
- Server Components (–º–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞)
- –†—É—á–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
apps/web/src/features/achievements/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ AchievementsContent.tsx      # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
‚îÇ   ‚îî‚îÄ‚îÄ AchievementsContent.module.css
‚îî‚îÄ‚îÄ README.md

apps/web/src/shared/
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îî‚îÄ‚îÄ useAchievements.ts           # SWR —Ö—É–∫–∏ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
‚îú‚îÄ‚îÄ lib/achievements/
‚îÇ   ‚îî‚îÄ‚îÄ calculateAchievements.ts     # –õ–æ–≥–∏–∫–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
‚îî‚îÄ‚îÄ components/ui/
    ‚îú‚îÄ‚îÄ AchievementsSkeleton.tsx     # –°–∫–µ–ª–µ—Ç–æ–Ω –∑–∞–≥—Ä—É–∑–∫–∏
    ‚îú‚îÄ‚îÄ AchievementsSkeleton.module.css
    ‚îú‚îÄ‚îÄ AchievementsError.tsx        # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—à–∏–±–æ–∫
    ‚îî‚îÄ‚îÄ AchievementsError.module.css

packages/types/src/data/
‚îî‚îÄ‚îÄ achievements.ts                  # –¢–∏–ø—ã –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
```

## üéØ –¢–∏–ø—ã –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏:
- **courses** - –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∑–∞ –∫—É—Ä—Å—ã
- **progress** - –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∑–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å
- **streak** - –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∑–∞ —Å–µ—Ä–∏–∏
- **social** - —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- **special** - —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä—ã –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π:
- üéØ **–ü–µ—Ä–≤—ã–π —à–∞–≥** - –Ω–∞—á–∞—Ç—å –ø–µ—Ä–≤—ã–π –∫—É—Ä—Å
- üèÜ **–ó–∞–≤–µ—Ä—à–∏—Ç–µ–ª—å** - –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø–µ—Ä–≤—ã–π –∫—É—Ä—Å
- üëë **–ú–∞—Å—Ç–µ—Ä –∫—É—Ä—Å–æ–≤** - –∑–∞–≤–µ—Ä—à–∏—Ç—å 5 –∫—É—Ä—Å–æ–≤
- üìà **–ù–∞—á–∏–Ω–∞—é—â–∏–π** - –¥–æ—Å—Ç–∏—á—å 25% –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- üî• **–¢—Ä–µ—Ö–¥–Ω–µ–≤–Ω–∞—è —Å–µ—Ä–∏—è** - –∑–∞–Ω–∏–º–∞—Ç—å—Å—è 3 –¥–Ω—è –ø–æ–¥—Ä—è–¥

## üîß API —Ö—É–∫–æ–≤

### `useAchievements()`
–û—Å–Ω–æ–≤–Ω–æ–π —Ö—É–∫ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π.

```typescript
const { data, error, isLoading } = useAchievements();
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è SWR:**
- `revalidateOnFocus: false` - –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ
- `dedupingInterval: 300000` - 5 –º–∏–Ω—É—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- `errorRetryCount: 3` - 3 –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ –æ—à–∏–±–∫–µ
- `keepPreviousData: true` - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ

### `useAchievementsByCategory()`
–•—É–∫ –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º.

```typescript
const { 
  achievementsByCategory, 
  unlockedCount, 
  totalCount, 
  completionPercentage 
} = useAchievementsByCategory();
```

### `useAchievementsMutation()`
–•—É–∫ –¥–ª—è –º—É—Ç–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π.

```typescript
const { 
  invalidateAchievements, 
  updateAchievements, 
  invalidateAllUserData 
} = useAchievementsMutation();
```

### `useAchievementsStats()`
–•—É–∫ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π.

```typescript
const { stats, error, isLoading } = useAchievementsStats();
```

## üîÑ –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞

–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏:

### –ö—É—Ä—Å—ã:
```typescript
// useCourses.ts
const invalidateAllCourses = () => {
  // courses:all –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è - –¥–∞–Ω–Ω—ã–µ –≤ courseStore
  mutate("user:achievements", undefined); // ‚Üê –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è
};
```

### –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
```typescript
// useUserData.ts
const invalidateUserData = () => {
  mutate("user:profile", undefined);
  mutate("user:achievements", undefined); // ‚Üê –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è
};
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü:
```typescript
// useRefreshData.ts
const { refreshData } = useRefreshData("achievements");
// –û–±–Ω–æ–≤–ª—è–µ—Ç: user:achievements, user:profile, user:with-trainings (courses —Ç–µ–ø–µ—Ä—å –≤ courseStore)
```

## üé® –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã UI

### `AchievementsSkeleton`
–ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–∫–µ–ª–µ—Ç–æ–Ω –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏.

```typescript
<AchievementsSkeleton />
<AchievementsSkeletonCompact /> // –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è
```

### `AchievementsError`
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—à–∏–±–æ–∫ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–∏.

```typescript
<AchievementsError error={error} onRetry={handleRetry} />
<AchievementsErrorCompact error={error} /> // –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è
```

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –î–æ (Server Components):
- ‚ùå –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å = –Ω–æ–≤—ã–π —Ä–µ–Ω–¥–µ—Ä –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- ‚ùå –ù–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚ùå –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
- ‚ùå –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

### –ü–æ—Å–ª–µ (SWR):
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ 5 –º–∏–Ω—É—Ç
- ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –∫—ç—à–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏
- ‚úÖ –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è:
```typescript
const config = {
  revalidateOnFocus: false,        // –ù–µ –æ–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ
  revalidateOnReconnect: true,     // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
  dedupingInterval: 300000,        // 5 –º–∏–Ω—É—Ç –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏
  errorRetryCount: 3,              // 3 –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ –æ—à–∏–±–∫–µ
  errorRetryInterval: 5000,        // 5 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏
  keepPreviousData: true,          // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ
};
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
```typescript
onSuccess: (data) => {
  if (process.env.NODE_ENV === "development") {
    console.warn(`üèÜ Achievements loaded: ${data.achievements.length} achievements`);
  }
}
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö:
```typescript
import { AchievementsContent } from "@features/achievements/components/AchievementsContent";

export default function AchievementsPage() {
  return <AchievementsContent />;
}
```

### –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:
```typescript
import { useAchievementsMutation } from "@shared/hooks/useAchievements";

const { invalidateAchievements } = useAchievementsMutation();

// –û–±–Ω–æ–≤–∏—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
invalidateAchievements();
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏ –≤ development:
- `üèÜ Achievements loaded: X achievements, Y completed courses`
- `üîÑ –û–±–Ω–æ–≤–ª—è–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è...`
- `‚úÖ achievements –æ–±–Ω–æ–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ`

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏
- –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä—É—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è** - WebSocket –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
2. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è—Ö
3. **–ê–Ω–∏–º–∞—Ü–∏–∏** - –ø–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –ø—Ä–∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–µ
4. **–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏** - —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –¥—Ä—É–∑—å—è–º–∏
5. **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ SWR –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∏–ª –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç —Å–∏—Å—Ç–µ–º—ã –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π:

- **5x –±—ã—Å—Ç—Ä–µ–µ** –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –∫—ç—à–∞
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- **–ù–∞–¥–µ–∂–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é –∏ –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è –Ω–æ–≤—ã–º–∏ —Ç–∏–ø–∞–º–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π.
